---
export interface Props {
    title?: string;
    description?: string;
    icon?: string;
    bgColor?: string;
    textColor?: string;
    className?: string;
}

const {
    title = '',
    description = '',
    icon = '',
    bgColor = 'bg-white',
    textColor = 'text-neutral-900',
    className = ''
} = Astro.props;
---

<div class={`${bgColor} ${textColor} rounded-2xl p-6 shadow-soft hover:shadow-medium transition-all duration-300 transform hover:-translate-y-1 animate-on-scroll ${className}`}>
    {icon && (
            <div class="w-12 h-12 mb-4 bg-primary-100 rounded-xl flex items-center justify-center">
                <div class="w-6 h-6 text-primary-500" set:html={icon}></div>
            </div>
    )}

    {title && <h3 class="font-display font-semibold text-xl mb-3">{title}</h3>}

    {description && <p class="text-sm opacity-80 leading-relaxed">{description}</p>}

    <slot/>
</div>
<a href="#por-que-elegirnos" class="text-white hover:text-primary-100 transition-colors duration-200 font-medium">
    ¿POR QUÉ ELEGIRNOS?
</a>
<a href="#contacto" class="text-white hover:text-primary-100 transition-colors duration-200 font-medium">
    CONTÁCTANOS
</a>
<div>

    <!-- Mobile Menu Button -->
    <button class="md:hidden text-white hover:text-primary-100 transition-colors duration-200" id="mobile-menu-btn">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>
</div>

<!-- Mobile Navigation -->
<div class="hidden md:hidden mt-4 pb-4" id="mobile-menu">
    <div class="flex flex-col space-y-3">
        <a href="#inicio" class="text-white hover:text-primary-100 transition-colors duration-200 font-medium">
            INICIO
        </a>
        <a href="#servicios" class="text-white hover:text-primary-100 transition-colors duration-200 font-medium">
            SERVICIOS
        </a>
        <a href="#por-que-elegirnos"
           class="text-white hover:text-primary-100 transition-colors duration-200 font-medium">
            ¿POR QUÉ ELEGIRNOS?
        </a>
        <a href="#contacto" class="text-white hover:text-primary-100 transition-colors duration-200 font-medium">
            CONTÁCTANOS
        </a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }

        // Smooth scroll para los enlaces
        const links = document.querySelectorAll<HTMLAnchorElement>('a[href^="#"]');

        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();

                const href = link.getAttribute('href');
                if (!href) return; // Evita null

                const target = document.querySelector(href);
                if (target) {
                    const headerHeight = 80;
                    const targetPosition = (target as HTMLElement).offsetTop - headerHeight;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });
    });
</script>